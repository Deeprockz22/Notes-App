<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Focus - Productivity Tool</title>
    <meta name="description"
        content="A minimalist black and white productivity tool combining Pomodoro timer, task management, and rich note-taking.">

    <!-- PWA Meta Tags -->
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#000000">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="apple-mobile-web-app-title" content="Focus">
    <link rel="apple-touch-icon" href="icon-192.png">

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <div class="app-container">
        <!-- Header -->
        <header class="app-header">
            <div class="header-left">
                <button class="theme-toggle" id="theme-toggle" aria-label="Toggle theme">
                    <span class="theme-icon">üåô</span>
                </button>
            </div>

            <div class="header-center">
                <h1 class="app-title">
                    FOCUS
                    <button class="logo-btn" id="logo-settings-btn" aria-label="Settings">
                        <span class="logo-letter">F</span>
                    </button>
                </h1>
            </div>

            <div class="header-right">
                <!-- Install button will be inserted here by PWA script -->
            </div>

            <nav class="nav-tabs">
                <button class="nav-tab active" data-tab="timer">
                    <span class="tab-icon">‚è±Ô∏è</span>
                    <span class="tab-label">Timer</span>
                </button>
                <button class="nav-tab" data-tab="tasks">
                    <span class="tab-icon">‚úì</span>
                    <span class="tab-label">Tasks</span>
                </button>
                <button class="nav-tab" data-tab="notes">
                    <span class="tab-icon">üìù</span>
                    <span class="tab-label">Notes</span>
                </button>
            </nav>
        </header>

        <!-- Main Content -->
        <main class="app-main">
            <!-- Timer Section -->
            <section class="section active" id="timer-section">
                <div class="timer-container" data-style="circular">
                    <!-- Quick Timer Presets -->
                    <div class="timer-presets">
                        <button class="preset-btn" data-duration="15">15m</button>
                        <button class="preset-btn" data-duration="25">25m</button>
                        <button class="preset-btn" data-duration="45">45m</button>
                        <button class="preset-btn" data-duration="60">60m</button>
                    </div>

                    <div class="timer-display">
                        <!-- Circular Progress Ring (SVG) -->
                        <svg class="timer-ring" viewBox="0 0 200 200">
                            <circle class="timer-ring-bg" cx="100" cy="100" r="90"></circle>
                            <circle class="timer-ring-progress" cx="100" cy="100" r="90"></circle>
                        </svg>

                        <!-- Time Display (Clickable to Edit) -->
                        <div class="timer-time" id="timer-time" title="Click to edit time">25:00</div>
                        <div class="timer-label" id="timer-label">Work Session</div>

                        <!-- Linear Progress Bar -->
                        <div class="timer-progress-bar">
                            <div class="timer-progress-fill"></div>
                        </div>
                    </div>

                    <div class="timer-controls">
                        <button class="btn btn-primary" id="timer-start">Start</button>
                        <button class="btn btn-secondary" id="timer-pause" disabled>Pause</button>
                        <button class="btn btn-secondary" id="timer-reset">Reset</button>
                        <button class="btn btn-secondary" id="timer-fullscreen"
                            title="Fullscreen Focus Mode">üñ•Ô∏è</button>
                    </div>

                    <div class="timer-stats">
                        <div class="stat-item">
                            <div class="stat-value" id="sessions-completed">0</div>
                            <div class="stat-label">Sessions</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value" id="total-focus-time">0m</div>
                            <div class="stat-label">Focus Time</div>
                        </div>
                    </div>

                    <div class="timer-settings">
                        <button class="btn-icon" id="settings-toggle" title="Timer Settings">‚öôÔ∏è</button>
                    </div>

                    <div class="settings-panel hidden" id="settings-panel">
                        <h3>Timer Settings</h3>

                        <div class="setting-item">
                            <label for="timer-style">Timer Style</label>
                            <select id="timer-style">
                                <option value="circular">Circular Progress</option>
                                <option value="linear">Linear Bar</option>
                                <option value="minimal">Minimal</option>
                            </select>
                        </div>

                        <div class="setting-item">
                            <label for="animation-intensity">Animation Intensity</label>
                            <select id="animation-intensity">
                                <option value="off">Off</option>
                                <option value="subtle">Subtle</option>
                                <option value="normal" selected>Normal</option>
                                <option value="intense">Intense</option>
                            </select>
                        </div>

                        <div class="setting-item">
                            <label for="work-duration">Work Duration (minutes)</label>
                            <input type="number" id="work-duration" min="1" max="60" value="25">
                        </div>
                        <div class="setting-item">
                            <label for="break-duration">Short Break (minutes)</label>
                            <input type="number" id="break-duration" min="1" max="30" value="5">
                        </div>
                        <div class="setting-item">
                            <label for="long-break-duration">Long Break (minutes)</label>
                            <input type="number" id="long-break-duration" min="1" max="60" value="15">
                        </div>
                        <div class="setting-item">
                            <label for="sessions-before-long">Sessions Before Long Break</label>
                            <input type="number" id="sessions-before-long" min="2" max="10" value="4">
                        </div>
                        <button class="btn btn-primary" id="save-settings">Save Settings</button>
                    </div>
                </div>
            </section>

            <!-- Tasks Section -->
            <section class="section" id="tasks-section">
                <div class="tasks-container">
                    <div class="section-header">
                        <h2>Tasks</h2>
                    </div>

                    <div class="task-input-container">
                        <input type="text" id="task-input" class="task-input" placeholder="Add a new task...">
                        <button class="btn btn-primary" id="add-task-btn">Add</button>
                    </div>

                    <div class="tasks-list" id="tasks-list">
                        <!-- Tasks will be dynamically inserted here -->
                    </div>

                    <div class="tasks-empty hidden" id="tasks-empty">
                        <p>No tasks yet. Add one to get started!</p>
                    </div>
                </div>
            </section>

            <!-- Notes Section -->
            <section class="section" id="notes-section">
                <div class="notes-container">
                    <div class="section-header">
                        <h2>Notes</h2>
                        <div class="header-actions">
                            <input type="text" id="notes-search" class="search-input" placeholder="Search notes...">
                            <button class="btn btn-primary" id="new-note-btn">+ New Note</button>
                        </div>
                    </div>

                    <div class="notes-list" id="notes-list">
                        <!-- Notes will be dynamically inserted here -->
                    </div>

                    <div class="notes-empty hidden" id="notes-empty">
                        <p>No notes yet. Create one to start writing!</p>
                    </div>
                </div>

                <!-- Note Editor Modal -->
                <div class="modal hidden" id="note-editor-modal">
                    <div class="modal-content">
                        <div class="modal-header">
                            <input type="text" id="note-title" class="note-title-input" placeholder="Note Title">
                            <button class="btn-close" id="close-note-editor">‚úï</button>
                        </div>

                        <div class="editor-toolbar">
                            <button class="toolbar-btn" data-command="bold"
                                title="Bold (Ctrl+B)"><strong>B</strong></button>
                            <button class="toolbar-btn" data-command="italic"
                                title="Italic (Ctrl+I)"><em>I</em></button>
                            <button class="toolbar-btn" data-command="underline"
                                title="Underline (Ctrl+U)"><u>U</u></button>
                            <span class="toolbar-divider"></span>
                            <button class="toolbar-btn" data-command="insertUnorderedList" title="Bullet List">‚Ä¢
                                List</button>
                            <button class="toolbar-btn" data-command="insertOrderedList" title="Numbered List">1.
                                List</button>
                            <button class="toolbar-btn" data-command="checklist" title="Checklist">‚òë Checklist</button>
                        </div>

                        <div class="note-editor" id="note-content" contenteditable="true"
                            data-placeholder="Start typing..."></div>

                        <div class="modal-footer">
                            <div class="note-meta">
                                <span id="note-timestamp"></span>
                            </div>
                            <button class="btn btn-danger" id="delete-note-btn">Delete Note</button>
                        </div>
                    </div>
                </div>
            </section>
        </main>

        <!-- Global Settings Modal -->
        <div class="modal hidden" id="global-settings-modal">
            <div class="modal-content settings-modal-content">
                <div class="modal-header">
                    <h2>Settings</h2>
                    <button class="btn-close" id="close-global-settings">‚úï</button>
                </div>

                <div class="settings-content">
                    <div class="settings-section">
                        <h3>Appearance</h3>
                        <div class="setting-item-row">
                            <label>Theme</label>
                            <div class="theme-switch-container">
                                <span class="theme-label">‚òÄÔ∏è Light</span>
                                <label class="theme-switch">
                                    <input type="checkbox" id="theme-switch-input">
                                    <span class="theme-slider"></span>
                                </label>
                                <span class="theme-label">üåô Dark</span>
                            </div>
                        </div>
                    </div>

                    <div class="settings-section">
                        <h3>Data Management</h3>
                        <div class="setting-item-row">
                            <label>Clear All Data</label>
                            <button class="btn btn-danger" id="clear-data-btn">Clear</button>
                        </div>
                    </div>

                    <div class="settings-section">
                        <h3>About</h3>
                        <p class="settings-info">Focus - Minimalist Productivity Tool</p>
                        <p class="settings-info">Version 2.0</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Fullscreen Timer Modal -->
        <div class="fullscreen-timer hidden" id="fullscreen-timer">
            <button class="btn-close fullscreen-close" id="close-fullscreen" title="Exit Fullscreen (Esc)">‚úï</button>

            <div class="fullscreen-content">
                <!-- Circular Progress Ring -->
                <svg class="fullscreen-ring" viewBox="0 0 200 200">
                    <circle class="timer-ring-bg" cx="100" cy="100" r="90"></circle>
                    <circle class="timer-ring-progress fullscreen-progress" cx="100" cy="100" r="90"></circle>
                </svg>

                <!-- Linear Progress Bar -->
                <div class="fullscreen-progress-bar">
                    <div class="fullscreen-progress-fill"></div>
                </div>

                <!-- Centered Timer Display -->
                <div class="fullscreen-timer-center">
                    <div class="fullscreen-time" id="fullscreen-time">25:00</div>
                    <div class="fullscreen-label" id="fullscreen-label">Work Session</div>
                </div>

                <!-- Floating Quote (positioned via JS) -->
                <div class="fullscreen-quote" id="fullscreen-quote"></div>

                <!-- Fullscreen Controls -->
                <div class="fullscreen-controls">
                    <button class="btn btn-primary" id="fullscreen-start">Start</button>
                    <button class="btn btn-secondary" id="fullscreen-pause" disabled>Pause</button>
                </div>
            </div>
        </div>
    </div>

    <audio id="timer-sound" preload="auto">
        <source
            src="data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmwhBjKH0fPTgjMGHm7A7+OZSA0PVqzn0rhsJAY2jtXzzIA0Bhdu0OvXmU4OEVK16Ni0aR0FMo3U9dSAMQYbaM/u2JdODg9SsubbumwiBjWO1PLPfygFH2vO7N6ZUxANT6rl27UmDBw+kdj02IIxBh1rx+zjmFESC0yp5dq3bSkGNY/V9NSAMAYabdDr15pPDxBRs+jZuXEkBTOO1fPTgjIGHW3P7d2ZTBEOT6rk3LdtJgU0jtXy04M0Bh5tz+7gmFEQDlCq5dq4byMGM4/W8dSBMgYdbM/t3ZlPEA5QquXauG8jBjOP1vHUgTIGHW3P7d2ZTxAOUKrl2rhvIwYzj9bx1IEyBh1tz+3dmU8QDlCq5dq4byMGM4/W8dSBMgYdbc/t3ZlPEA5QquXauG8jBjOP1vHUgTIGHW3P7d2ZTxAOUKrl2rhvIwYzj9bx1IEyBh1tz+3dmU8QDlCq5dq4byMGM4/W8dSBMgYdbc/t3ZlPEA5QquXauG8jBjOP1vHUgTIGHW3P7d2ZTxAOUKrl2rhvIwYzj9bx1IEyBh1tz+3dmU8QDlCq5dq4byMGM4/W8dSBMgYdbc/t3ZlPEA5QquXauG8jBjOP1vHUgTIGHW3P7d2ZTxAO"
            type="audio/wav">
    </audio>

    <!-- Service Worker Registration -->
    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('/sw.js')
                    .then((registration) => {
                        console.log('ServiceWorker registered:', registration.scope);
                    })
                    .catch((error) => {
                        console.log('ServiceWorker registration failed:', error);
                    });
            });
        }
    </script>

    <script src="script.js"></script>
</body>

</html>